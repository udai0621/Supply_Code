<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®APIåŒ–ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼ˆFastAPIç·¨ï¼‰</title>
    <style>
        body {
            font-family: 'Hiragino Kaku Gothic Pro', 'ãƒ’ãƒ©ã‚®ãƒè§’ã‚´ Pro', 'Yu Gothic Medium', 'æ¸¸ã‚´ã‚·ãƒƒã‚¯ Medium', YuGothic, 'æ¸¸ã‚´ã‚·ãƒƒã‚¯ä½“', 'Meiryo', sans-serif;
            line-height: 1.7;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #fafafa;
        }

```
    .container {
        background-color: white;
        padding: 40px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    h1 {
        color: #2c5aa0;
        text-align: center;
        border-bottom: 3px solid #2c5aa0;
        padding-bottom: 15px;
        margin-bottom: 30px;
        font-size: 2.2em;
    }
    
    h2 {
        color: #e74c3c;
        border-left: 5px solid #e74c3c;
        padding-left: 15px;
        margin-top: 35px;
        margin-bottom: 20px;
        font-size: 1.5em;
    }
    
    h3 {
        color: #27ae60;
        margin-top: 25px;
        margin-bottom: 15px;
        font-size: 1.3em;
    }
    
    h4 {
        color: #8e44ad;
        margin-top: 20px;
        margin-bottom: 10px;
        font-size: 1.1em;
    }
    
    pre {
        background-color: #2d3748;
        color: #e2e8f0;
        padding: 20px;
        border-radius: 8px;
        overflow-x: auto;
        margin: 15px 0;
        border-left: 4px solid #4299e1;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 0.9em;
    }
    
    code {
        background-color: #f1f5f9;
        color: #e53e3e;
        padding: 2px 6px;
        border-radius: 4px;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        font-size: 0.9em;
    }
    
    .example-box {
        background-color: #f0f8ff;
        border: 2px solid #4299e1;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
    }
    
    .example-box h4 {
        color: #2c5aa0;
        margin-top: 0;
    }
    
    .warning-box {
        background-color: #fffbf0;
        border: 2px solid #f6ad55;
        border-radius: 8px;
        padding: 15px;
        margin: 20px 0;
    }
    
    .warning-box h4 {
        color: #c05621;
        margin-top: 0;
    }
    
    .info-box {
        background-color: #f0fff4;
        border: 2px solid #68d391;
        border-radius: 8px;
        padding: 15px;
        margin: 20px 0;
    }
    
    .info-box h4 {
        color: #22543d;
        margin-top: 0;
    }
    
    ul, ol {
        padding-left: 25px;
    }
    
    li {
        margin-bottom: 8px;
    }
    
    table {
        border-collapse: collapse;
        width: 100%;
        margin: 20px 0;
    }
    
    th, td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
    }
    
    th {
        background-color: #f8f9fa;
        color: #495057;
        font-weight: bold;
    }
    
    .file-structure {
        background-color: #1a202c;
        color: #e2e8f0;
        font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
    }
    
    .emoji {
        font-size: 1.2em;
    }
    
    @media print {
        body {
            background-color: white;
            font-size: 12pt;
        }
        
        .container {
            box-shadow: none;
            border: none;
        }
        
        pre {
            background-color: #f8f9fa !important;
            color: #333 !important;
            border: 1px solid #ddd;
            page-break-inside: avoid;
        }
        
        h1, h2, h3 {
            page-break-after: avoid;
        }
        
        .example-box, .warning-box, .info-box {
            page-break-inside: avoid;
            border-color: #ddd;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <h1>ğŸ¤– æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®APIåŒ–ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ï¼ˆFastAPIç·¨ï¼‰</h1>

```
    <h2>ğŸ“‹ æ¦‚è¦</h2>
    <p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’FastAPIã‚’ä½¿ã£ã¦APIåŒ–ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚</p>

    <div class="example-box">
        <h4>ğŸª ä¾‹ãˆè©±ï¼šãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ </h4>
        <p>ã“ã‚Œã¯ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®ã‚ªãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚ãŠå®¢ã•ã‚“ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰ãŒãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆãƒ‡ãƒ¼ã‚¿ï¼‰ã‚’æ³¨æ–‡ã™ã‚‹ã¨ã€å¨æˆ¿ï¼ˆæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ï¼‰ãŒæ–™ç†ï¼ˆäºˆæ¸¬çµæœï¼‰ã‚’ä½œã£ã¦æä¾›ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚</p>
    </div>

    <h2>ğŸŒ¸ ä½¿ç”¨ã™ã‚‹ãƒ¢ãƒ‡ãƒ«</h2>
    <p>ä»Šå›ã¯ã€ã‚¢ãƒ¤ãƒ¡ã®èŠ±ã®ç‰¹å¾´ã‹ã‚‰å“ç¨®ã‚’åˆ†é¡ã™ã‚‹ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
    <ul>
        <li><strong>å…¥åŠ›ï¼š</strong> èŠ±ã³ã‚‰ã®é•·ã•ã€å¹…ã€ãŒãã®é•·ã•ã€å¹…</li>
        <li><strong>å‡ºåŠ›ï¼š</strong> ã‚¢ãƒ¤ãƒ¡ã®å“ç¨®ï¼ˆsetosaã€versicolorã€virginicaï¼‰</li>
    </ul>

    <h2>ğŸ“¦ å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>
    <pre><code>pip install fastapi uvicorn scikit-learn pandas numpy joblib</code></pre>

    <h2>ã‚¹ãƒ†ãƒƒãƒ—1: æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆã¨ä¿å­˜</h2>
    <p>ã¾ãšã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ã¦ä¿å­˜ã—ã¾ã—ã‚‡ã†ã€‚</p>

    <h3>ğŸ“„ train_model.py</h3>
    <pre><code># train_model.py
```

import pandas as pd
from sklearn.datasets import load_iris
from sklearn.ensemble import RandomForestClassifier
from sklearn.model_selection import train_test_split
from sklearn.metrics import accuracy_score
import joblib

# ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿

iris = load_iris()
X, y = iris.data, iris.target

# è¨“ç·´ç”¨ã¨ãƒ†ã‚¹ãƒˆç”¨ã«ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†å‰²

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

# ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆã¨è¨“ç·´

model = RandomForestClassifier(n_estimators=100, random_state=42)
model.fit(X_train, y_train)

# ãƒ¢ãƒ‡ãƒ«ã®è©•ä¾¡

predictions = model.predict(X_test)
accuracy = accuracy_score(y_test, predictions)
print(fâ€ãƒ¢ãƒ‡ãƒ«ã®ç²¾åº¦: {accuracy:.2f}â€)

# ãƒ¢ãƒ‡ãƒ«ã®ä¿å­˜

joblib.dump(model, â€˜iris_model.pklâ€™)
print(â€œãƒ¢ãƒ‡ãƒ«ã‚’ iris_model.pkl ã«ä¿å­˜ã—ã¾ã—ãŸâ€)

# ç‰¹å¾´é‡ã®åå‰ã¨ã‚¯ãƒ©ã‚¹åã‚‚ä¿å­˜

feature_names = iris.feature_names
class_names = iris.target_names.tolist()

model_info = {
â€˜feature_namesâ€™: feature_names,
â€˜class_namesâ€™: class_names
}
joblib.dump(model_info, â€˜model_info.pklâ€™)</code></pre>

```
    <h2>ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®å®šç¾©</h2>
    <p>APIã§å—ã‘å–ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å½¢å¼ã‚’å®šç¾©ã—ã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ±ºã‚ã‚‹ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚</p>

    <h3>ğŸ“„ models.py</h3>
    <pre><code># models.py
```

from pydantic import BaseModel
from typing import List

class IrisFeatures(BaseModel):
â€œâ€â€œã‚¢ãƒ¤ãƒ¡ã®ç‰¹å¾´é‡ã‚’å—ã‘å–ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«â€â€â€
sepal_length: float  # ãŒãã®é•·ã•
sepal_width: float   # ãŒãã®å¹…
petal_length: float  # èŠ±ã³ã‚‰ã®é•·ã•
petal_width: float   # èŠ±ã³ã‚‰ã®å¹…

```
class Config:
    schema_extra = {
        "example": {
            "sepal_length": 5.1,
            "sepal_width": 3.5,
            "petal_length": 1.4,
            "petal_width": 0.2
        }
    }
```

class PredictionResponse(BaseModel):
â€œâ€â€œäºˆæ¸¬çµæœã‚’è¿”ã™ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«â€â€â€
predicted_class: str
confidence: float
probabilities: dict</code></pre>

```
    <h2>ã‚¹ãƒ†ãƒƒãƒ—3: FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ</h2>
    <p>ãƒ¡ã‚¤ãƒ³ã®APIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã™ã€‚</p>

    <h3>ğŸ“„ main.py</h3>
    <pre><code># main.py
```

from fastapi import FastAPI, HTTPException
from fastapi.responses import HTMLResponse
import joblib
import numpy as np
from models import IrisFeatures, PredictionResponse
import uvicorn

# FastAPIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ

app = FastAPI(
title=â€œã‚¢ãƒ¤ãƒ¡åˆ†é¡APIâ€,
description=â€œã‚¢ãƒ¤ãƒ¡ã®èŠ±ã®ç‰¹å¾´ã‹ã‚‰å“ç¨®ã‚’äºˆæ¸¬ã™ã‚‹APIâ€,
version=â€œ1.0.0â€
)

# ãƒ¢ãƒ‡ãƒ«ã¨ãƒ¡ã‚¿æƒ…å ±ã®èª­ã¿è¾¼ã¿

try:
model = joblib.load(â€˜iris_model.pklâ€™)
model_info = joblib.load(â€˜model_info.pklâ€™)
print(â€œãƒ¢ãƒ‡ãƒ«ã®èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ã¾ã—ãŸâ€)
except FileNotFoundError:
print(â€œã‚¨ãƒ©ãƒ¼: ãƒ¢ãƒ‡ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚å…ˆã«train_model.pyã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚â€)
model = None
model_info = None

@app.get(â€/â€, response_class=HTMLResponse)
async def root():
â€œâ€â€œãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ - APIã®ä½¿ã„æ–¹ã‚’è¡¨ç¤ºâ€â€â€
html_content = â€œâ€â€
<!DOCTYPE html>
<html>
<head>
<title>ã‚¢ãƒ¤ãƒ¡åˆ†é¡API</title>
<style>
body { font-family: Arial, sans-serif; margin: 40px; }
.container { max-width: 800px; }
.example { background-color: #f5f5f5; padding: 10px; border-radius: 5px; }
</style>
</head>
<body>
<div class=â€œcontainerâ€>
<h1>ğŸŒ¸ ã‚¢ãƒ¤ãƒ¡åˆ†é¡API</h1>
<p>ã“ã®APIã¯ã€ã‚¢ãƒ¤ãƒ¡ã®èŠ±ã®ç‰¹å¾´ã‹ã‚‰å“ç¨®ã‚’äºˆæ¸¬ã—ã¾ã™ã€‚</p>

```
        &lt;h2&gt;ä½¿ç”¨æ–¹æ³•&lt;/h2&gt;
        &lt;p&gt;&lt;code&gt;/predict&lt;/code&gt; ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«POSTãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ãã ã•ã„ã€‚&lt;/p&gt;
        
        &lt;h2&gt;ä¾‹&lt;/h2&gt;
        &lt;div class="example"&gt;
            &lt;pre&gt;
```

{
â€œsepal_lengthâ€: 5.1,
â€œsepal_widthâ€: 3.5,
â€œpetal_lengthâ€: 1.4,
â€œpetal_widthâ€: 0.2
}
</pre>
</div>

```
        &lt;h2&gt;APIä»•æ§˜æ›¸&lt;/h2&gt;
        &lt;p&gt;&lt;a href="/docs"&gt;Swagger UI&lt;/a&gt; | &lt;a href="/redoc"&gt;ReDoc&lt;/a&gt;&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
"""
return html_content
```

@app.post(â€/predictâ€, response_model=PredictionResponse)
async def predict_iris(features: IrisFeatures):
â€œâ€â€œã‚¢ãƒ¤ãƒ¡ã®å“ç¨®ã‚’äºˆæ¸¬ã™ã‚‹â€â€â€

```
if model is None:
    raise HTTPException(
        status_code=500, 
        detail="ãƒ¢ãƒ‡ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“ã€‚train_model.pyã‚’å…ˆã«å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚"
    )

try:
    # å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’é…åˆ—ã«å¤‰æ›
    input_data = np.array([[
        features.sepal_length,
        features.sepal_width,
        features.petal_length,
        features.petal_width
    ]])
    
    # äºˆæ¸¬å®Ÿè¡Œ
    prediction = model.predict(input_data)[0]
    probabilities = model.predict_proba(input_data)[0]
    
    # çµæœã‚’æ•´ç†
    predicted_class = model_info['class_names'][prediction]
    confidence = float(max(probabilities))
    
    prob_dict = {
        model_info['class_names'][i]: float(prob) 
        for i, prob in enumerate(probabilities)
    }
    
    return PredictionResponse(
        predicted_class=predicted_class,
        confidence=confidence,
        probabilities=prob_dict
    )
    
except Exception as e:
    raise HTTPException(status_code=400, detail=f"äºˆæ¸¬ã‚¨ãƒ©ãƒ¼: {str(e)}")
```

@app.get(â€/healthâ€)
async def health_check():
â€œâ€â€œãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯â€â€â€
return {
â€œstatusâ€: â€œhealthyâ€,
â€œmodel_loadedâ€: model is not None,
â€œmessageâ€: â€œAPIã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã¾ã™â€
}

@app.get(â€/model-infoâ€)
async def get_model_info():
â€œâ€â€œãƒ¢ãƒ‡ãƒ«ã®æƒ…å ±ã‚’å–å¾—â€â€â€
if model_info is None:
raise HTTPException(status_code=500, detail=â€œãƒ¢ãƒ‡ãƒ«æƒ…å ±ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“â€)

```
return {
    "feature_names": model_info['feature_names'],
    "class_names": model_info['class_names'],
    "model_type": "RandomForestClassifier"
}
```

if **name** == â€œ**main**â€:
uvicorn.run(app, host=â€œ0.0.0.0â€, port=8000)</code></pre>

```
    <h2>ã‚¹ãƒ†ãƒƒãƒ—4: APIã®ãƒ†ã‚¹ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ</h2>
    <p>APIãŒæ­£ã—ãå‹•ä½œã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</p>

    <h3>ğŸ“„ test_api.py</h3>
    <pre><code># test_api.py
```

import requests
import json

# APIã®ãƒ™ãƒ¼ã‚¹URL

BASE_URL = â€œhttp://localhost:8000â€

def test_prediction():
â€œâ€â€œäºˆæ¸¬APIã‚’ãƒ†ã‚¹ãƒˆâ€â€â€
# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
test_data = {
â€œsepal_lengthâ€: 5.1,
â€œsepal_widthâ€: 3.5,
â€œpetal_lengthâ€: 1.4,
â€œpetal_widthâ€: 0.2
}

```
# APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
response = requests.post(f"{BASE_URL}/predict", json=test_data)

if response.status_code == 200:
    result = response.json()
    print("âœ… äºˆæ¸¬æˆåŠŸ!")
    print(f"äºˆæ¸¬å“ç¨®: {result['predicted_class']}")
    print(f"ä¿¡é ¼åº¦: {result['confidence']:.2f}")
    print("å„å“ç¨®ã®ç¢ºç‡:")
    for class_name, prob in result['probabilities'].items():
        print(f"  {class_name}: {prob:.3f}")
else:
    print(f"âŒ ã‚¨ãƒ©ãƒ¼: {response.status_code}")
    print(response.text)
```

def test_health():
â€œâ€â€œãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚’ãƒ†ã‚¹ãƒˆâ€â€â€
response = requests.get(fâ€{BASE_URL}/healthâ€)
if response.status_code == 200:
print(â€œâœ… ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æˆåŠŸ!â€)
print(json.dumps(response.json(), indent=2, ensure_ascii=False))
else:
print(fâ€âŒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼: {response.status_code}â€)

if **name** == â€œ**main**â€:
print(â€=== APIãƒ†ã‚¹ãƒˆé–‹å§‹ ===â€)

```
print("\n1. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯")
test_health()

print("\n2. äºˆæ¸¬ãƒ†ã‚¹ãƒˆ")
test_prediction()

print("\n=== ãƒ†ã‚¹ãƒˆå®Œäº† ===")</code></pre>

    <h2>ğŸš€ å®Ÿè¡Œæ‰‹é †</h2>

    <h3>1. ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ</h3>
    <pre><code>python train_model.py</code></pre>

    <h3>2. APIã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•</h3>
    <pre><code>python main.py</code></pre>
    <p>ã¾ãŸã¯</p>
    <pre><code>uvicorn main:app --reload --host 0.0.0.0 --port 8000</code></pre>

    <h3>3. ãƒ–ãƒ©ã‚¦ã‚¶ã§APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ç¢ºèª</h3>
    <ul>
        <li>Swagger UI: <code>http://localhost:8000/docs</code></li>
        <li>ReDoc: <code>http://localhost:8000/redoc</code></li>
        <li>ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸: <code>http://localhost:8000</code></li>
    </ul>

    <h3>4. APIã®ãƒ†ã‚¹ãƒˆ</h3>
    <p>åˆ¥ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ï¼š</p>
    <pre><code>python test_api.py</code></pre>

    <h2>ğŸ”§ curlã§ã®ãƒ†ã‚¹ãƒˆä¾‹</h2>

    <h3>äºˆæ¸¬ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</h3>
    <pre><code>curl -X POST "http://localhost:8000/predict" \
 -H "Content-Type: application/json" \
 -d '{
   "sepal_length": 5.1,
   "sepal_width": 3.5,
   "petal_length": 1.4,
   "petal_width": 0.2
 }'</code></pre>

    <h3>ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯</h3>
    <pre><code>curl http://localhost:8000/health</code></pre>

    <h3>ãƒ¢ãƒ‡ãƒ«æƒ…å ±å–å¾—</h3>
    <pre><code>curl http://localhost:8000/model-info</code></pre>

    <h2>ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ</h2>
    <div class="file-structure">
```

iris-api/
â”œâ”€â”€ main.py           # ãƒ¡ã‚¤ãƒ³ã®APIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ models.py         # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ã®å®šç¾©
â”œâ”€â”€ train_model.py    # ãƒ¢ãƒ‡ãƒ«ã®è¨“ç·´ã¨ä¿å­˜
â”œâ”€â”€ test_api.py       # APIãƒ†ã‚¹ãƒˆç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ iris_model.pkl    # ä¿å­˜ã•ã‚ŒãŸæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«
â””â”€â”€ model_info.pkl    # ãƒ¢ãƒ‡ãƒ«ã®ãƒ¡ã‚¿æƒ…å ±
</div>

```
    <h2>ğŸŒ æœ¬ç•ªç’°å¢ƒã¸ã®å±•é–‹ã®ãƒ’ãƒ³ãƒˆ</h2>

    <h3>1. DockeråŒ–</h3>
    <pre><code>FROM python:3.9-slim
```

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
CMD [â€œuvicornâ€, â€œmain:appâ€, â€œâ€“hostâ€, â€œ0.0.0.0â€, â€œâ€“portâ€, â€œ8000â€]</code></pre>

```
    <h3>2. ç’°å¢ƒå¤‰æ•°ã®ä½¿ç”¨</h3>
    <pre><code>import os
```

PORT = int(os.getenv(â€œPORTâ€, 8000))</code></pre>

```
    <h3>3. ãƒ­ã‚°ã®è¿½åŠ </h3>
    <pre><code>import logging
```

logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(**name**)</code></pre>

```
    <h3>4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¼·åŒ–</h3>
    <pre><code>from fastapi.middleware.cors import CORSMiddleware
```

app.add_middleware(CORSMiddleware, â€¦)</code></pre>

```
    <h2>ğŸ“ ã¾ã¨ã‚</h2>
    <p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’FastAPIã§APIåŒ–ã™ã‚‹åŸºæœ¬çš„ãªæ–¹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚</p>

    <div class="info-box">
        <h4>ğŸ¯ é‡è¦ãªãƒã‚¤ãƒ³ãƒˆ</h4>
        <ul>
            <li>ãƒ¢ãƒ‡ãƒ«ã®ä¿å­˜ã¨èª­ã¿è¾¼ã¿ï¼ˆjoblibä½¿ç”¨ï¼‰</li>
            <li>Pydanticã‚’ä½¿ã£ãŸãƒ‡ãƒ¼ã‚¿æ¤œè¨¼</li>
            <li>é©åˆ‡ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</li>
            <li>APIä»•æ§˜æ›¸ã®è‡ªå‹•ç”Ÿæˆ</li>
            <li>ãƒ†ã‚¹ãƒˆã®é‡è¦æ€§</li>
        </ul>
    </div>

    <div class="example-box">
        <h4>ğŸª ä¾‹ãˆè©±ã§æŒ¯ã‚Šè¿”ã‚‹ã¨</h4>
        <p>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ï¼ˆAPIï¼‰ã‚’é–‹åº—ã—ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ï¼‰ã‚’æ±ºã‚ã€å¨æˆ¿ï¼ˆæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ï¼‰ã‚’æº–å‚™ã—ã€æ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ ï¼ˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼‰ã‚’æ§‹ç¯‰ã—ã€æœ€å¾Œã«ãŠå®¢ã•ã‚“ï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰ãŒæº€è¶³ã™ã‚‹ã‹ãƒ†ã‚¹ãƒˆã—ã¾ã—ãŸã€‚</p>
    </div>

    <div class="warning-box">
        <h4>ğŸ‰ ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼</h4>
        <p>ã“ã‚Œã§ã€ã‚ãªãŸã®æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã¯ä¸–ç•Œä¸­ã©ã“ã‹ã‚‰ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹APIã«ãªã‚Šã¾ã—ãŸï¼</p>
    </div>
</div>
```

</body>
</html>