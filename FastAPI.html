<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’APIåŒ–ã™ã‚‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</title>
    <style>
        @page {
            margin: 2cm;
            size: A4;
        }

```
    * {
        box-sizing: border-box;
    }
    
    body {
        font-family: 'Segoe UI', 'Hiragino Sans', 'Yu Gothic UI', Meiryo, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background: white;
    }
    
    h1 {
        color: #2c3e50;
        border-bottom: 3px solid #3498db;
        padding-bottom: 10px;
        margin-top: 0;
        font-size: 2em;
    }
    
    h2 {
        color: #34495e;
        margin-top: 2em;
        margin-bottom: 1em;
        font-size: 1.5em;
        border-left: 4px solid #3498db;
        padding-left: 15px;
    }
    
    h3 {
        color: #2c3e50;
        margin-top: 1.5em;
        margin-bottom: 0.8em;
        font-size: 1.2em;
    }
    
    h4 {
        color: #34495e;
        margin-top: 1.2em;
        margin-bottom: 0.5em;
        font-size: 1.1em;
    }
    
    p {
        margin-bottom: 1em;
        text-align: justify;
    }
    
    .highlight {
        background: #fff3cd;
        padding: 15px;
        border-left: 4px solid #ffc107;
        margin: 1em 0;
        border-radius: 0 5px 5px 0;
    }
    
    pre {
        background: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 5px;
        padding: 15px;
        overflow-x: auto;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.9em;
        line-height: 1.4;
        margin: 1em 0;
        page-break-inside: avoid;
    }
    
    code {
        background: #f1f3f4;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: 'Consolas', 'Monaco', monospace;
        font-size: 0.9em;
    }
    
    pre code {
        background: none;
        padding: 0;
    }
    
    .step-box {
        background: #e8f5e8;
        border: 1px solid #4caf50;
        border-radius: 8px;
        padding: 20px;
        margin: 1.5em 0;
        page-break-inside: avoid;
    }
    
    .step-title {
        font-weight: bold;
        color: #2e7d32;
        margin-bottom: 10px;
        font-size: 1.1em;
    }
    
    .warning {
        background: #fff3e0;
        border: 1px solid #ff9800;
        border-radius: 5px;
        padding: 15px;
        margin: 1em 0;
    }
    
    .warning::before {
        content: "âš ï¸ ";
        font-weight: bold;
    }
    
    .info {
        background: #e3f2fd;
        border: 1px solid #2196f3;
        border-radius: 5px;
        padding: 15px;
        margin: 1em 0;
    }
    
    .info::before {
        content: "ğŸ’¡ ";
    }
    
    .example {
        background: #f3e5f5;
        border: 1px solid #9c27b0;
        border-radius: 5px;
        padding: 15px;
        margin: 1em 0;
    }
    
    .example::before {
        content: "ğŸ”§ ä¾‹: ";
        font-weight: bold;
        color: #7b1fa2;
    }
    
    ul, ol {
        padding-left: 30px;
        margin-bottom: 1em;
    }
    
    li {
        margin-bottom: 0.5em;
    }
    
    .toc {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 20px;
        margin: 2em 0;
        page-break-inside: avoid;
    }
    
    .toc h2 {
        margin-top: 0;
        color: #495057;
        border: none;
        padding: 0;
    }
    
    .toc ul {
        list-style-type: none;
        padding-left: 0;
    }
    
    .toc ul ul {
        padding-left: 20px;
        margin-top: 0.5em;
    }
    
    .toc a {
        color: #007bff;
        text-decoration: none;
    }
    
    .toc a:hover {
        text-decoration: underline;
    }
    
    .download-info {
        position: fixed;
        top: 10px;
        right: 10px;
        background: #28a745;
        color: white;
        padding: 10px 15px;
        border-radius: 5px;
        font-size: 0.9em;
        box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        z-index: 1000;
    }
    
    @media print {
        .download-info {
            display: none;
        }
        
        body {
            max-width: none;
            padding: 0;
        }
        
        h1, h2, h3, h4 {
            page-break-after: avoid;
        }
        
        pre, .step-box, .warning, .info, .example {
            page-break-inside: avoid;
        }
    }
    
    .footer {
        margin-top: 3em;
        padding-top: 2em;
        border-top: 1px solid #dee2e6;
        text-align: center;
        color: #6c757d;
        font-size: 0.9em;
    }
</style>
```

</head>
<body>
    <div class="download-info">
        Ctrl+P (Windows) ã¾ãŸã¯ Cmd+P (Mac) ã§PDFä¿å­˜ã§ãã¾ã™
    </div>

```
<h1>æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’APIåŒ–ã™ã‚‹ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«</h1>

<div class="toc">
    <h2>ç›®æ¬¡</h2>
    <ul>
        <li><a href="#introduction">1. ã¯ã˜ã‚ã«</a></li>
        <li><a href="#prerequisites">2. å‰ææ¡ä»¶</a></li>
        <li><a href="#installation">3. å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</a></li>
        <li><a href="#step1">4. ã‚¹ãƒ†ãƒƒãƒ—1: æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ</a></li>
        <li><a href="#step2">5. ã‚¹ãƒ†ãƒƒãƒ—2: Flask APIã®ä½œæˆ</a></li>
        <li><a href="#step3">6. ã‚¹ãƒ†ãƒƒãƒ—3: APIã®èµ·å‹•ã¨ãƒ†ã‚¹ãƒˆ</a></li>
        <li><a href="#step4">7. ã‚¹ãƒ†ãƒƒãƒ—4: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„</a></li>
        <li><a href="#step5">8. ã‚¹ãƒ†ãƒƒãƒ—5: æœ¬ç•ªç’°å¢ƒã¸ã®å¯¾å¿œ</a></li>
        <li><a href="#step6">9. ã‚¹ãƒ†ãƒƒãƒ—6: APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä½œæˆ</a></li>
        <li><a href="#summary">10. ã¾ã¨ã‚</a></li>
        <li><a href="#next-steps">11. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</a></li>
    </ul>
</div>

<section id="introduction">
    <h2>ã¯ã˜ã‚ã«</h2>
    
    <div class="highlight">
        <p>æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã£ãŸã‚‰ã€æ¬¡ã¯ãã‚Œã‚’å®Ÿéš›ã«ä½¿ãˆã‚‹å½¢ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯<strong>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§æ–™ç†ã‚’ä½œã£ãŸå¾Œã€ãŠå®¢ã•ã‚“ã«æä¾›ã™ã‚‹ãŸã‚ã®ã‚µãƒ¼ãƒ“ã‚¹ä½“åˆ¶ã‚’æ•´ãˆã‚‹</strong>ã®ã¨ä¼¼ã¦ã„ã¾ã™ã€‚</p>
    </div>
    
    <p>ã©ã‚“ãªã«ç¾å‘³ã—ã„æ–™ç†ï¼ˆå„ªç§€ãªãƒ¢ãƒ‡ãƒ«ï¼‰ã‚’ä½œã£ã¦ã‚‚ã€ãŠå®¢ã•ã‚“ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰ãŒç°¡å˜ã«æ³¨æ–‡ã§ãã¦ã€ã™ãã«æä¾›ã•ã‚Œã‚‹ä»•çµ„ã¿ãŒãªã„ã¨æ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
    
    <p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€Python ã® Flask ã‚’ä½¿ã£ã¦ã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’ Web API ã¨ã—ã¦å…¬é–‹ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚</p>
</section>

<section id="prerequisites">
    <h2>å‰ææ¡ä»¶</h2>
    <ul>
        <li>Python ã®åŸºæœ¬çŸ¥è­˜</li>
        <li>æ©Ÿæ¢°å­¦ç¿’ã®åŸºç¤çŸ¥è­˜ï¼ˆscikit-learn ã‚’ä½¿ã£ãŸã“ã¨ãŒã‚ã‚‹ï¼‰</li>
        <li>ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³æ“ä½œã®åŸºæœ¬</li>
    </ul>
</section>

<section id="installation">
    <h2>å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</h2>
    
    <pre><code>pip install flask scikit-learn pandas numpy joblib requests</code></pre>
</section>

<section id="step1">
    <h2>ã‚¹ãƒ†ãƒƒãƒ—1: ç°¡å˜ãªæ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®ä½œæˆ</h2>
    
    <div class="info">
        ã¾ãšã€ã‚¢ã‚¤ãƒªã‚¹ã®èŠ±ã®åˆ†é¡ã‚’è¡Œã†ç°¡å˜ãªãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚ã“ã‚Œã¯<strong>èŠ±ã®å°‚é–€å®¶ãŒèŠ±ã³ã‚‰ã¨è¼ç‰‡ã®é•·ã•ãƒ»å¹…ã‚’è¦‹ã¦å“ç¨®ã‚’åˆ¤å®šã™ã‚‹</strong>ã®ã‚’ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã«æ•™ãˆã‚‹ä½œæ¥­ã§ã™ã€‚
    </div>

    <pre><code># model_training.py
```

from sklearn import datasets
from sklearn.ensemble import RandomForestClassifier
from sklearn.model_selection import train_test_split
import joblib

# ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿

iris = datasets.load_iris()
X, y = iris.data, iris.target

# è¨“ç·´ãƒ»ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã®åˆ†å‰²

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2, random_state=42)

# ãƒ¢ãƒ‡ãƒ«ã®è¨“ç·´

model = RandomForestClassifier(n_estimators=100, random_state=42)
model.fit(X_train, y_train)

# ãƒ¢ãƒ‡ãƒ«ã®ä¿å­˜

joblib.dump(model, â€˜iris_model.pklâ€™)

# å“ç¨®åã®ãƒãƒƒãƒ”ãƒ³ã‚°ã‚‚ä¿å­˜

species_mapping = {0: â€˜setosaâ€™, 1: â€˜versicolorâ€™, 2: â€˜virginicaâ€™}
joblib.dump(species_mapping, â€˜species_mapping.pklâ€™)

print(â€œãƒ¢ãƒ‡ãƒ«ã®è¨“ç·´å®Œäº†ï¼â€)
print(fâ€ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã®ç²¾åº¦: {model.score(X_test, y_test):.2f}â€)</code></pre>
</section>

```
<section id="step2">
    <h2>ã‚¹ãƒ†ãƒƒãƒ—2: Flask ã‚’ä½¿ã£ãŸåŸºæœ¬çš„ãª API ã®ä½œæˆ</h2>
    
    <div class="info">
        æ¬¡ã«ã€ä¿å­˜ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ã€Web API ã¨ã—ã¦å…¬é–‹ã—ã¾ã™ã€‚ã“ã‚Œã¯<strong>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®æ³¨æ–‡ã‚·ã‚¹ãƒ†ãƒ </strong>ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚
    </div>

    <pre><code># app.py
```

from flask import Flask, request, jsonify
import joblib
import numpy as np

# Flask ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åˆæœŸåŒ–

app = Flask(**name**)

# ãƒ¢ãƒ‡ãƒ«ã¨å“ç¨®ãƒãƒƒãƒ”ãƒ³ã‚°ã®èª­ã¿è¾¼ã¿

model = joblib.load(â€˜iris_model.pklâ€™)
species_mapping = joblib.load(â€˜species_mapping.pklâ€™)

@app.route(â€™/â€™)
def home():
â€œâ€â€œAPIã®èª¬æ˜ãƒšãƒ¼ã‚¸â€â€â€
return â€œâ€â€
<h1>ã‚¢ã‚¤ãƒªã‚¹åˆ†é¡API</h1>
<p>èŠ±ã³ã‚‰ã¨è¼ç‰‡ã®æ¸¬å®šå€¤ã‹ã‚‰ã€ã‚¢ã‚¤ãƒªã‚¹ã®å“ç¨®ã‚’äºˆæ¸¬ã—ã¾ã™</p>
<h2>ä½¿ç”¨æ–¹æ³•:</h2>
<p>POST /predict ã«ä»¥ä¸‹ã®JSONå½¢å¼ã§ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡:</p>
<pre>
{
â€œsepal_lengthâ€: 5.1,
â€œsepal_widthâ€: 3.5,
â€œpetal_lengthâ€: 1.4,
â€œpetal_widthâ€: 0.2
}
</pre>
â€œâ€â€

@app.route(â€™/predictâ€™, methods=[â€˜POSTâ€™])
def predict():
â€œâ€â€œäºˆæ¸¬ã‚’è¡Œã†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆâ€â€â€
try:
# ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
data = request.get_json()

```
    # å¿…è¦ãªé …ç›®ãŒã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    required_fields = ['sepal_length', 'sepal_width', 'petal_length', 'petal_width']
    for field in required_fields:
        if field not in data:
            return jsonify({'error': f'{field} ãŒå¿…è¦ã§ã™'}), 400
    
    # ç‰¹å¾´é‡ã®æº–å‚™
    features = np.array([[
        data['sepal_length'],
        data['sepal_width'], 
        data['petal_length'],
        data['petal_width']
    ]])
    
    # äºˆæ¸¬ã®å®Ÿè¡Œ
    prediction = model.predict(features)[0]
    probability = model.predict_proba(features)[0]
    
    # çµæœã®æº–å‚™
    result = {
        'prediction': species_mapping[prediction],
        'prediction_id': int(prediction),
        'probabilities': {
            species_mapping[i]: float(prob) 
            for i, prob in enumerate(probability)
        }
    }
    
    return jsonify(result)
    
except Exception as e:
    return jsonify({'error': str(e)}), 500
```

@app.route(â€™/healthâ€™, methods=[â€˜GETâ€™])
def health_check():
â€œâ€â€œã‚µãƒ¼ãƒãƒ¼ã®å¥åº·çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯â€â€â€
return jsonify({â€˜statusâ€™: â€˜healthyâ€™, â€˜messageâ€™: â€˜API is runningâ€™})

if **name** == â€˜**main**â€™:
app.run(debug=True, host=â€˜0.0.0.0â€™, port=5000)</code></pre>
</section>

```
<section id="step3">
    <h2>ã‚¹ãƒ†ãƒƒãƒ—3: API ã®èµ·å‹•ã¨ãƒ†ã‚¹ãƒˆ</h2>

    <div class="step-box">
        <div class="step-title">ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•</div>
        <pre><code>python app.py</code></pre>
        <p>ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã™ã‚‹ã¨ã€<code>http://localhost:5000</code> ã§APIã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚</p>
    </div>

    <h3>API ã®ãƒ†ã‚¹ãƒˆæ–¹æ³•</h3>

    <h4>1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®ç¢ºèª</h4>
    <p><code>http://localhost:5000</code> ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€API ã®èª¬æ˜ãƒšãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¾ã™ã€‚</p>

    <h4>2. curl ã§ã®ãƒ†ã‚¹ãƒˆ</h4>
    <pre><code># äºˆæ¸¬ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é€ä¿¡
```

curl -X POST http://localhost:5000/predict   
-H â€œContent-Type: application/jsonâ€   
-d â€˜{
â€œsepal_lengthâ€: 5.1,
â€œsepal_widthâ€: 3.5,
â€œpetal_lengthâ€: 1.4,
â€œpetal_widthâ€: 0.2
}â€™

# ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯

curl http://localhost:5000/health</code></pre>

```
    <h4>3. Python ã§ã®ãƒ†ã‚¹ãƒˆ</h4>
    <pre><code># test_api.py
```

import requests
import json

# APIã®URL

url = â€˜http://localhost:5000/predictâ€™

# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿

test_data = {
â€˜sepal_lengthâ€™: 5.1,
â€˜sepal_widthâ€™: 3.5,
â€˜petal_lengthâ€™: 1.4,
â€˜petal_widthâ€™: 0.2
}

# ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®é€ä¿¡

response = requests.post(url, json=test_data)

if response.status_code == 200:
result = response.json()
print(â€œäºˆæ¸¬çµæœ:â€)
print(fâ€å“ç¨®: {result[â€˜predictionâ€™]}â€)
print(â€œç¢ºç‡:â€)
for species, prob in result[â€˜probabilitiesâ€™].items():
print(fâ€  {species}: {prob:.3f}â€)
else:
print(fâ€ã‚¨ãƒ©ãƒ¼: {response.status_code}â€)
print(response.text)</code></pre>
</section>

```
<section id="step4">
    <h2>ã‚¹ãƒ†ãƒƒãƒ—4: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®æ”¹å–„</h2>
    
    <div class="warning">
        å®Ÿéš›ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€æ§˜ã€…ãªç¨®é¡ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯<strong>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã§æ³¨æ–‡ã‚’å—ã‘ã‚‹éš›ã«ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«ãªã„æ–™ç†ã‚’æ³¨æ–‡ã•ã‚ŒãŸã‚Šã€ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼æƒ…å ±ãŒä¸æ˜ã ã£ãŸã‚Šã™ã‚‹çŠ¶æ³</strong>ã¨ä¼¼ã¦ã„ã¾ã™ã€‚
    </div>

    <pre><code># improved_app.pyï¼ˆä¸€éƒ¨æŠœç²‹ï¼‰
```

def validate_input(data):
â€œâ€â€œå…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼â€â€â€
required_fields = [â€˜sepal_lengthâ€™, â€˜sepal_widthâ€™, â€˜petal_lengthâ€™, â€˜petal_widthâ€™]

```
# å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å­˜åœ¨ç¢ºèª
for field in required_fields:
    if field not in data:
        return False, f'{field} ãŒå¿…è¦ã§ã™'

# æ•°å€¤å‹ã®ç¢ºèª
for field in required_fields:
    try:
        float(data[field])
    except (ValueError, TypeError):
        return False, f'{field} ã¯æ•°å€¤ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'

# å€¤ã®ç¯„å›²ç¢ºèªï¼ˆå®Ÿéš›ã®ã‚¢ã‚¤ãƒªã‚¹ãƒ‡ãƒ¼ã‚¿ã®ç¯„å›²ï¼‰
ranges = {
    'sepal_length': (4.0, 8.0),
    'sepal_width': (2.0, 4.5),
    'petal_length': (1.0, 7.0),
    'petal_width': (0.1, 2.5)
}

for field, (min_val, max_val) in ranges.items():
    value = float(data[field])
    if not (min_val <= value <= max_val):
        return False, f'{field} ã¯ {min_val} ã‹ã‚‰ {max_val} ã®é–“ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™'

return True, None</code></pre>
</section>

<section id="step5">
    <h2>ã‚¹ãƒ†ãƒƒãƒ—5: æœ¬ç•ªç’°å¢ƒã¸ã®å¯¾å¿œ</h2>

    <h3>1. ç’°å¢ƒå¤‰æ•°ã®ä½¿ç”¨</h3>
    <pre><code># config.py
```

import os

class Config:
MODEL_PATH = os.environ.get(â€˜MODEL_PATHâ€™, â€˜iris_model.pklâ€™)
SPECIES_MAPPING_PATH = os.environ.get(â€˜SPECIES_MAPPING_PATHâ€™, â€˜species_mapping.pklâ€™)
DEBUG = os.environ.get(â€˜FLASK_DEBUGâ€™, â€˜Falseâ€™).lower() == â€˜trueâ€™
PORT = int(os.environ.get(â€˜PORTâ€™, 5000))
HOST = os.environ.get(â€˜HOSTâ€™, â€˜0.0.0.0â€™)</code></pre>

```
    <h3>2. DockeråŒ–</h3>
    <pre><code># Dockerfile
```

FROM python:3.9-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

EXPOSE 5000

CMD [â€œpythonâ€, â€œapp.pyâ€]</code></pre>

```
    <pre><code># requirements.txt
```

Flask==2.3.2
scikit-learn==1.3.0
pandas==2.0.3
numpy==1.24.3
joblib==1.3.1
gunicorn==21.2.0</code></pre>

```
    <h3>3. Gunicorn ã§ã®èµ·å‹•</h3>
    <pre><code># æœ¬ç•ªç’°å¢ƒã§ã¯ Gunicorn ã‚’ä½¿ç”¨
```

gunicorn â€“bind 0.0.0.0:5000 â€“workers 4 app:app</code></pre>
</section>

```
<section id="step6">
    <h2>ã‚¹ãƒ†ãƒƒãƒ—6: API ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ä½œæˆ</h2>
    
    <div class="info">
        è‰¯ã„APIã«ã¯ã€ä½¿ã„æ–¹ã‚’èª¬æ˜ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå¿…è¦ã§ã™ã€‚ã“ã‚Œã¯<strong>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼</strong>ã®ã‚ˆã†ãªã‚‚ã®ã§ã™ã€‚
    </div>

    <div class="example">
        APIãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ä¾‹ã‚’ä½œæˆã—ã¦ã€åˆ©ç”¨è€…ãŒç°¡å˜ã«ä½¿ã„æ–¹ã‚’ç†è§£ã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹ã‚„ ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã®èª¬æ˜ã‚‚å«ã‚ã‚‹ã“ã¨ã§ã€é–‹ç™ºè€…ã«ã¨ã£ã¦ä½¿ã„ã‚„ã™ã„APIã«ãªã‚Šã¾ã™ã€‚
    </div>
</section>

<section id="summary">
    <h2>ã¾ã¨ã‚</h2>
    
    <p>ã“ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã§ã¯ã€æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã‚’Web APIã¨ã—ã¦å…¬é–‹ã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã—ãŸã€‚é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ï¼š</p>
    
    <div class="step-box">
        <ol>
            <li><strong>ãƒ¢ãƒ‡ãƒ«ã®ä¿å­˜</strong>: è¨“ç·´ã—ãŸãƒ¢ãƒ‡ãƒ«ã‚’ <code>joblib</code> ã§ä¿å­˜</li>
            <li><strong>Flask ã§ã® API ä½œæˆ</strong>: ã‚·ãƒ³ãƒ—ãƒ«ã§è»½é‡ãªWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨</li>
            <li><strong>ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°</strong>: æ§˜ã€…ãªå…¥åŠ›ã«å¯¾ã—ã¦é©åˆ‡ã«å¯¾å¿œ</li>
            <li><strong>ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³</strong>: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼ã§äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ã‚’é˜²æ­¢</li>
            <li><strong>æœ¬ç•ªå¯¾å¿œ</strong>: DockeråŒ–ã‚„ç’°å¢ƒå¤‰æ•°ã®ä½¿ç”¨ã§å®Ÿéš›ã®é‹ç”¨ã«å¯¾å¿œ</li>
            <li><strong>ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</strong>: APIã®ä½¿ã„æ–¹ã‚’æ˜ç¢ºã«èª¬æ˜</li>
        </ol>
    </div>
    
    <div class="highlight">
        <p>ã“ã‚Œã§ã€ã‚ãªãŸã®æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã¯<strong>24æ™‚é–“å–¶æ¥­ã®ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</strong>ã®ã‚ˆã†ã«ã€ã„ã¤ã§ã‚‚ã©ã“ã‹ã‚‰ã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹å½¢ã«ãªã‚Šã¾ã—ãŸï¼</p>
    </div>
</section>

<section id="next-steps">
    <h2>æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h2>
    
    <ul>
        <li>ã‚ˆã‚Šè¤‡é›‘ãªãƒ¢ãƒ‡ãƒ«ï¼ˆãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãªã©ï¼‰ã®APIåŒ–</li>
        <li>èªè¨¼æ©Ÿèƒ½ã®è¿½åŠ </li>
        <li>ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ã®å®Ÿè£…</li>
        <li>ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨ãƒ­ã‚°åˆ†æ</li>
        <li>A/Bãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ã®è¿½åŠ </li>
    </ul>
</section>

<div class="footer">
    <p>æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«APIåŒ–ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ« | ä½œæˆæ—¥: 2025å¹´8æœˆ</p>
</div>
```

</body>
</html>